(()=>{var e={283:()=>{let e=document.getElementById("btn-start"),t=document.getElementById("btn-stake"),i=document.getElementById("btn-end"),n=document.getElementById("btn-new"),s=document.getElementById("money"),a=document.getElementById("stake"),l=document.getElementById("sound");function d(){let e=new XMLHttpRequest;e.onload=function(){let t=JSON.parse(e.responseText);if(4==e.readyState&&200==e.status){console.log(t),t.player_values.length>=3&&i.removeAttribute("disabled"),o("player-result",t.player_values);let e=[];t.player_values.forEach((t=>{e.push("0")})),o("tavern-result",e,500)}else 4==e.readyState&&400==e.status&&r()},e.open("POST","dice.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=dice_roll")}function r(){let l=new XMLHttpRequest;l.onload=function(){let d=JSON.parse(l.responseText);if(4==l.readyState&&200==l.status){switch(o("player-result",d.player_values),o("tavern-result",d.tavern_values),d.won){case 0:c("./audio/game_over.mp3"),u("Es tut uns leid :-(<br /><br />Du hast leider verloren");break;case 1:c("./audio/won.mp3"),u("Juppppiiiieee!!!<br /><br />Du hast gewonnen :-)");break;case 2:c("./audio/game_over.mp3"),u("Sei nicht traurig...<br /><br />Bei einem unentschieden verliert man schlieÃŸlich auch sein Einsatz nicht ;-)")}s.innerHTML=d.money,a.value=null,a.setAttribute("disabled",""),a.style.visibility="hidden",t.setAttribute("disabled",""),t.style.visibility="hidden",e.setAttribute("disabled",""),e.style.visibility="hidden",i.setAttribute("disabled",""),i.style.visibility="hidden",n.style.display="block"}else 4==l.readyState&&400==l.status&&(d.message&&d.message.length>0&&u(d.message),e.removeAttribute("disabled"),i.setAttribute("disabled",""))},l.open("POST","dice.php",!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send("action=dice_end")}function o(e,t,i=0){let n=document.getElementById(e);setTimeout((()=>{n.querySelectorAll("li").forEach((e=>{e.remove()}));for(let e=0;e<t.length;e++){let i=document.createElement("li"),s=document.createElement("img");s.setAttribute("height","30"),s.setAttribute("width","30"),s.setAttribute("src","./img/dice_"+t[e]+".png"),i.appendChild(s),n.appendChild(i)}}),i)}function u(e,t=5e3){let i=document.getElementById("notifications"),n=document.createElement("div");n.style.opacity=1,n.setAttribute("class","card notification");let s=document.createElement("div");s.setAttribute("class","card-header notification-header"),s.innerHTML="Meldung";let a=document.createElement("div");a.setAttribute("class","card-body notification-body"),a.innerHTML=e,n.appendChild(s),n.appendChild(a),i.appendChild(n);let l=n.style.opacity;setTimeout((()=>{let e=setInterval((()=>{l-=.075,n.style.opacity=l,l<=0&&(n.remove(),clearInterval(e))}),50)}),t)}function c(e){l.setAttribute("src",e),l.play()}window.addEventListener("load",(()=>{!function(){let e=new XMLHttpRequest;e.onload=function(){4==e.readyState&&200==e.status&&(s.innerHTML=JSON.parse(e.responseText).money)},e.open("POST","dice.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=get_player_money")}()})),a.addEventListener("input",(()=>{!isNaN(a.value)&&a.value>0?t.removeAttribute("disabled"):t.setAttribute("disabled","")})),t.addEventListener("click",(()=>{!function(i){let n=new XMLHttpRequest;n.onload=function(){let i=JSON.parse(n.responseText);4==n.readyState&&200==n.status?(i.message&&i.message.length>0&&u(i.message),isNaN(i.money)||(s.innerHTML=i.money),t.setAttribute("disabled",""),e.removeAttribute("disabled")):4==n.readyState&&400==n.status&&(i.message&&i.message.length>0&&u(i.message),t.removeAttribute("disabled"),e.setAttribute("disabled",""))},n.open("POST","dice.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("action=dice_start&stake="+i)}(a.value)})),e.addEventListener("click",(()=>{c("./audio/dice.mp3"),d()})),e.addEventListener("touchend",(e=>{c("./audio/dice.mp3"),d(),e.preventDefault()})),i.addEventListener("click",(()=>{r()})),n.addEventListener("click",(()=>{document.getElementById("player-result").querySelectorAll("li").forEach(((e,t)=>{setTimeout((()=>{e.remove()}),250+250*t)})),document.getElementById("tavern-result").querySelectorAll("li").forEach(((e,t)=>{setTimeout((()=>{e.remove()}),250+250*t)})),setTimeout((()=>{a.style.visibility="visible"}),250),setTimeout((()=>{t.style.visibility="visible"}),500),setTimeout((()=>{e.style.visibility="visible"}),750),setTimeout((()=>{i.style.visibility="visible"}),1e3),n.style.display="none",a.removeAttribute("disabled")}))}},t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";i(283)})()})();