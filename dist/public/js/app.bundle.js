(()=>{var e={283:()=>{let e=document.getElementById("btn-start"),t=document.getElementById("btn-stake"),n=document.getElementById("btn-end"),s=document.getElementById("btn-new"),a=document.getElementById("money"),r=document.getElementById("stake"),l=document.getElementById("sound");const i=250;function d(){let e=new XMLHttpRequest;e.onload=function(){let t=JSON.parse(e.responseText);if(4==e.readyState&&200==e.status){console.log(t),t.player_values.length>=3&&n.removeAttribute("disabled"),u("player-result",t.player_values);let e=[];t.player_values.forEach((t=>{e.push("0")})),u("tavern-result",e,350)}else 4==e.readyState&&400==e.status&&o()},e.open("POST","dice.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=dice_roll")}function o(){let l=new XMLHttpRequest;l.onload=function(){let i=JSON.parse(l.responseText);if(4==l.readyState&&200==l.status){switch(u("player-result",i.player_values),u("tavern-result",i.tavern_values),i.won){case 0:p("./audio/game_over.mp3"),c("Es tut uns leid :-(<br /><br />Du hast leider verloren");break;case 1:p("./audio/won.mp3"),c("Juppppiiiieee!!!<br /><br />Du hast gewonnen :-)");break;case 2:p("./audio/game_over.mp3"),c("Sei nicht traurig...<br /><br />Bei einem unentschieden verliert man schlieÃŸlich auch sein Einsatz nicht ;-)")}a.innerHTML=i.money,r.value=null,r.setAttribute("disabled",""),t.setAttribute("disabled",""),e.setAttribute("disabled",""),n.setAttribute("disabled",""),document.querySelector(".controls").querySelector("fieldset").style.display="none",s.style.display="block"}else 4==l.readyState&&400==l.status&&(i.message&&i.message.length>0&&c(i.message),e.removeAttribute("disabled"),n.setAttribute("disabled",""))},l.open("POST","dice.php",!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send("action=dice_end")}function u(e,t,n=0){let s=document.getElementById(e);setTimeout((()=>{s.querySelectorAll("li").forEach((e=>{e.remove()}));for(let e=0;e<t.length;e++){let n=document.createElement("li"),a=document.createElement("img");a.setAttribute("height","30"),a.setAttribute("width","30"),a.setAttribute("src","./img/dice_"+t[e]+".png"),n.appendChild(a),s.appendChild(n)}}),n)}function c(e,t=5e3){let n=document.getElementById("notifications"),s=document.createElement("div");s.style.opacity=1,s.setAttribute("class","card notification");let a=document.createElement("div");a.setAttribute("class","card-header notification-header"),a.innerHTML="Meldung";let r=document.createElement("div");r.setAttribute("class","card-body notification-body"),r.innerHTML=e,s.appendChild(a),s.appendChild(r),n.appendChild(s);let l=s.style.opacity;setTimeout((()=>{let e=setInterval((()=>{l-=.075,s.style.opacity=l,l<=0&&(s.remove(),clearInterval(e))}),50)}),t)}function p(e){l.setAttribute("src",e),l.play()}window.addEventListener("load",(()=>{!function(){let e=new XMLHttpRequest;e.onload=function(){4==e.readyState&&200==e.status&&(a.innerHTML=JSON.parse(e.responseText).money)},e.open("POST","dice.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=get_player_money")}()})),r.addEventListener("input",(()=>{!isNaN(r.value)&&r.value>0?t.removeAttribute("disabled"):t.setAttribute("disabled","")})),t.addEventListener("click",(()=>{!function(n){let s=new XMLHttpRequest;s.onload=function(){let n=JSON.parse(s.responseText);4==s.readyState&&200==s.status?(n.message&&n.message.length>0&&c(n.message),isNaN(n.money)||(a.innerHTML=n.money),t.setAttribute("disabled",""),e.removeAttribute("disabled")):4==s.readyState&&400==s.status&&(n.message&&n.message.length>0&&c(n.message),t.removeAttribute("disabled"),e.setAttribute("disabled",""))},s.open("POST","dice.php",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send("action=dice_start&stake="+n)}(r.value)})),e.addEventListener("click",(()=>{p("./audio/dice.mp3"),d()})),e.addEventListener("touchend",(e=>{p("./audio/dice.mp3"),d(),e.preventDefault()})),n.addEventListener("click",(()=>{o()})),s.addEventListener("click",(()=>{!function(){document.getElementById("player-result").querySelectorAll("li").forEach(((e,t)=>{setTimeout((()=>{e.remove()}),i+t*i)})),document.getElementById("tavern-result").querySelectorAll("li").forEach(((e,t)=>{setTimeout((()=>{e.remove()}),i+t*i)}));let e=document.getElementById("player-result").children.length;setTimeout((()=>{s.style.display="none",r.removeAttribute("disabled"),document.querySelector(".controls").querySelector("fieldset").style.display="block"}),e*i)}()}))}},t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(283)})()})();