(()=>{var e={283:()=>{let e=document.getElementById("btn-start"),t=document.getElementById("btn-stake"),n=document.getElementById("btn-end"),a=document.getElementById("money"),s=document.getElementById("stake"),d=document.getElementById("sound");function l(){let e=new XMLHttpRequest;e.onload=function(){let t=JSON.parse(e.responseText);if(4==e.readyState&&200==e.status){console.log(t),t.player_values.length>=3&&(n.disabled=!1),r("player-result",t.player_values);let e=[];t.player_values.forEach((t=>{e.push("0")})),r("tavern-result",e,1e3)}else 4==e.readyState&&400==e.status&&i()},e.open("POST","dice.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=dice_roll")}function i(){let d=new XMLHttpRequest;d.onload=function(){let l=JSON.parse(d.responseText);if(4==d.readyState&&200==d.status){switch(r("player-result",l.player_values),r("tavern-result",l.tavern_values),l.won){case 0:u("./audio/game_over.mp3"),o("Es tut uns leid :-(<br /><br />Du hast leider verloren");break;case 1:u("./audio/won.mp3"),o("Juppppiiiieee!!!<br /><br />Du hast gewonnen :-)");break;case 2:u("./audio/game_over.mp3"),o("Sei nicht traurig...<br /><br />Bei einem unentschieden verliert man schlieÃŸlich auch sein Einsatz nicht ;-)")}a.innerHTML=l.money,function(){s.value=null,s.disabled=!0,t.disabled=!0,e.disabled=!0,n.disabled=!0;let a=10,d=setInterval((()=>{o("Spiel startet neu in "+a+" sekunden",1e3),a--,0==a&&(s.disabled=!1,clearInterval(d))}),1e3);setTimeout((()=>{document.getElementById("player-result").querySelectorAll("li").forEach(((e,t)=>{setTimeout((()=>{e.remove()}),250+250*t)})),document.getElementById("tavern-result").querySelectorAll("li").forEach(((e,t)=>{setTimeout((()=>{e.remove()}),250+250*t)}))}),9e3)}()}else 4==d.readyState&&400==d.status&&(l.message&&l.message.length>0&&o(l.message),e.disabled=!1,n.disabled=!0)},d.open("POST","dice.php",!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send("action=dice_end")}function r(e,t,n=0){let a=document.getElementById(e);setTimeout((()=>{a.querySelectorAll("li").forEach((e=>{e.remove()}));for(let e=0;e<t.length;e++){let n=document.createElement("li"),s=document.createElement("img");s.setAttribute("height","30"),s.setAttribute("width","30"),s.setAttribute("src","./img/dice_"+t[e]+".png"),n.appendChild(s),a.appendChild(n)}}),n)}function o(e,t=5e3){let n=document.getElementById("notifications"),a=document.createElement("div");a.style.opacity=1,a.setAttribute("class","card notification");let s=document.createElement("div");s.setAttribute("class","card-header notification-header"),s.innerHTML="Meldung";let d=document.createElement("div");d.setAttribute("class","card-body notification-body"),d.innerHTML=e,a.appendChild(s),a.appendChild(d),n.appendChild(a);let l=a.style.opacity;setTimeout((()=>{let e=setInterval((()=>{l-=.075,a.style.opacity=l,l<=0&&(a.remove(),clearInterval(e))}),50)}),t)}function u(e){d.setAttribute("src",e),d.play()}window.addEventListener("load",(()=>{!function(){let e=new XMLHttpRequest;e.onload=function(){4==e.readyState&&200==e.status&&(a.innerHTML=JSON.parse(e.responseText).money)},e.open("POST","dice.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=get_player_money")}()})),s.addEventListener("input",(()=>{!isNaN(s.value)&&s.value>0?t.disabled=!1:t.disabled=!0})),t.addEventListener("click",(()=>{!function(n){let s=new XMLHttpRequest;s.onload=function(){let n=JSON.parse(s.responseText);4==s.readyState&&200==s.status?(n.message&&n.message.length>0&&o(n.message),isNaN(n.money)||(a.innerHTML=n.money),t.disabled=!0,e.disabled=!1):4==s.readyState&&400==s.status&&(n.message&&n.message.length>0&&o(n.message),t.disabled=!1,e.disabled=!0)},s.open("POST","dice.php",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send("action=dice_start&stake="+n)}(s.value)})),e.addEventListener("click",(()=>{u("./audio/dice.mp3"),l()})),e.addEventListener("touchend",(e=>{u("./audio/dice.mp3"),l(),e.preventDefault()})),n.addEventListener("click",(()=>{i(),s.disabled=!0,t.disabled=!0,e.disabled=!0,n.disabled=!0}))}},t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(283)})()})();